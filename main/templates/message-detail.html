{% extends "base.html" %}
{% block content %}
    <div class="container" di="message-detail-view">
        
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <div id="message-title-detail">
                    <h1>{{message.title}}</h1>
                    <br>
                </div>
            </div>
        </div>
    
        <article>
                <div class="row">
                    <div id="message-text-detail" class="col-md-offset-3 col-md-6">
                        {{message.text}}
                    </div>
                </div>
        </article>
        {% if message.media %}
            <div class="col-md-offset-3 col-md-6">
                <img id="message-media-div" src="{{message.media.url}}">
            </div>
        {% endif %}
       
        <div class="row">
            <div class="col-md-offset-3 col-md-6">        
                <span id="message-meta-detail" class="message-meta"> Posted by {{message.author}} on {{message.date_posted}}</span>
            </div>
        </div>
        <div class="row" id="message-id-row">       
            <div class="col-md-offset-3" data-post-id="{{message.id}}">
                {% if user.is_authenticated %}
                    <button class="btn" id="favorite-btn"><i class="glyphicon glyphicon-star"></i>Favorite</button>
                    <button class="btn" id="unfavorite-btn"><i class="glyphicon glyphicon-star"></i>Un-Favorite</button>
                {% endif %}
                {% if user.is_superuser %}
                    <button class="btn" id="pin-btn"><i class="glyphicon glyphicon-pushpin"></i> Pin to the home page</button>
                    <button class="btn" id="delete-message"><i class="glyphicon glyphicon-trash"></i> Delete this message</button>
                {% endif %}
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-offset-3">
            {% if user.is_authenticated %}
                <button class="btn" id="create-message-comment">Post a Comment</button>
            {% endif %}
            </div>
        </div>
        <div class="row" id="comment-form">
            <form class="form-group col-sm-offset-3" method="POST" message-id="{{message.id}}" action="">
                {% csrf_token %}
                <input type="hidden" name="type" value="comment">
                <input type="hidden" name="user" value="{{user.id}}">
                <input type="hidden" name="message" value="{{message.id}}">
                <div class="form-group">
                    <div class="row">
                        <div class="col-sm-9">
                            <label for="comment-content">Comment</label>
                            <input type="text" name="content" class="form-control" placeholder="Type your comment in here.">
                        </div>
                    </div>
                </div>
                <button class="btn" id="submit-message-comment" type="submit">Submit</button>
            </form>
        </div>
        {% if comments %}
        
        <div class="row" id="comments-list">
            <h2><center>Comments</center></h2>
            {% for comment in comments %}
                <div class="row">
                    <div class="col-md-offset-3 col-md-6">
                        <p>{{comment.content}}</p>
                        <p>Posted by {{comment.user}} on {{comment.date_posted}}.</p>  
                        <hr>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    
    
{% endblock content %}